#!/bin/bash# This script downloads and installs the Wazuh agent on RPM-based Linux distributions.# It automatically uses the machine's hostname as the agent name.AGENT_PKG="wazuh-agent-4.7.5-1.x86_64.rpm" AGENT_URL="https://packages.wazuh.com/4.x/yum/${AGENT_PKG}"WAZUH_MANAGER_IP="<PUT MANAGER FQDN/IP HERE>"echo -n "Getting hostname"sleep 1echo -n "."sleep 0.5echo -n "."sleep 0.5echo -n "."sleep 1echo # Newlineecho ""sleep 0.2echo "Got it, hostname is $HOSTNAME"sleep 0.3echo "Target is $WAZUH_MANAGER_IP"sleep 1echo ""echo "Downloading and installing the Wazuh agent with hostname '$HOSTNAME'..."sleep 1# Download the agent and, if successful, run the installation.# The environment variables are set for the installation command.# WAZUH_AGENT_NAME is set to the machine's hostname using the $HOSTNAME variable.curl -o ${AGENT_PKG} ${AGENT_URL} && \sudo WAZUH_MANAGER="${WAZUH_MANAGER_IP}" WAZUH_AGENT_NAME="$HOSTNAME" WAZUH_REGISTRATION_SERVER="${WAZUH_MANAGER_IP}" rpm -ihv ${AGENT_PKG}# Check if the installation was successful before starting the serviceif [ $? -eq 0 ]; then    echo "Installation successful. Enabling and starting the Wazuh agent service..."    sudo systemctl daemon-reload    sudo systemctl enable wazuh-agent    sudo systemctl start wazuh-agent    echo "Wazuh agent installation and startup complete."        # Clean up the downloaded installer    rm ${AGENT_PKG}    echo "Cleaned up installer file."else    echo "Error: Wazuh agent installation failed. Please check the output above."fi